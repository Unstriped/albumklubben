(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),s=n.n(c),o=n(1),u=n.n(o),l=n(2),i=n(5),m=n(6),f=n(9),d=n(7),p=n(10),h=n(8),g=n.n(h),v=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"?method=".concat(e,"&album=").concat(t,"&artist=").concat(n,"&autocorrect=").concat(a,"&api_key=").concat("2729fff6586466b0db95b377fc7597c3","&format=json")},b=function(e){return e.filter(function(e){return/^\d+$/.test(e.name)&&4===e.name.length})[0].name},w=function(e){var t=e.name,n=e.artist,a=e.url,r=e.image,c=e.tracks,s=e.tags;return{name:t,artist:n,urls:[{type:"lastfm",url:a}],tracks:c,year:b(s.tag),image:r.length>0?r[r.length-1]["#text"]:null}},y=function(){var e=Object(l.a)(u.a.mark(function e(t,n){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error("Both album and artist needs to be passed");case 2:return a=v("album.getInfo",t,n),e.abrupt("return",fetch("http://ws.audioscrobbler.com/2.0/"+a).then(function(){var e=Object(l.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw new Error("Unable to get album data!");case 2:return e.next=4,t.json();case 4:return n=e.sent,e.abrupt("return",w(n.album));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},k=function(e){return e.feed.entry.filter(function(e){return e.gsx$week.$t}).map(function(e){return{week:Number.parseInt(e.gsx$week.$t),album:e.gsx$album.$t,artist:e.gsx$artist.$t,spotifyUrl:e.gsx$spotify.$t}})},x=function(){var e=Object(l.a)(u.a.mark(function e(t){var n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://spreadsheets.google.com/feeds/list/1_7q9jusMZAvBBdk4cHoSg-LhjswU76k0XvGv1EC66u0/od6/public/values?alt=json").then(function(){var e=Object(l.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw new Error("Unable to get google spreadsheet!");case 2:return e.next=4,t.json();case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,a=k(n),e.abrupt("return",a.find(function(e){return e.week===t}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=r.a.createContext(),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(f.a)(this,Object(d.a)(t).call(this,e))).state={resourcesToLoad:3,resourcesLoaded:0,weekNumber:E(),albumData:null},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark(function e(){var t,n,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(this.state.weekNumber);case 2:return t=e.sent,this.updateLoadingProgress(),console.log(t),e.next=7,y(t.album,t.artist);case 7:(n=e.sent).urls.push({type:"spotify",url:t.spotifyUrl}),this.setState({albumData:n,resourcesLoaded:this.state.resourcesLoaded+1},function(){g()([n.image],{onSingleImageComplete:function(){a.updateLoadingProgress()}})});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateLoadingProgress",value:function(){this.setState({resourcesLoaded:this.state.resourcesLoaded+1})}},{key:"render",value:function(){var e=this.props.children;return r.a.createElement(j.Provider,{value:{weekNumber:this.state.weekNumber,albumData:this.state.albumData,loadingProgress:this.state.resourcesLoaded/this.state.resourcesToLoad}},e)}}]),t}(a.Component),D=j,L=function(){var e=Object(a.useContext)(D).weekNumber;return r.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"3rem",height:"3rem",backgroundColor:"yellow",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center"}},e)},O=(n(18),function(){var e=Object(a.useContext)(D).albumData;return e?r.a.createElement("div",{className:"backdrop",style:{backgroundImage:'url("'.concat(e.image,'")')}}):null}),$=(n(19),function(e){var t=e.type,n=e.url;return r.a.createElement("a",{className:"external-action",href:n},r.a.createElement(C,{type:t}),P(t))}),C=function(e){switch(e.type){case"spotify":return r.a.createElement(B,null);case"lastfm":return r.a.createElement(z,null);default:return null}},B=function(){return r.a.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd"},r.a.createElement("path",{fill:"#1DB954",d:"M19.098 10.638c-3.868-2.297-10.248-2.508-13.941-1.387-.593.18-1.22-.155-1.399-.748-.18-.593.154-1.22.748-1.4 4.239-1.287 11.285-1.038 15.738 1.605.533.317.708 1.005.392 1.538-.316.533-1.005.709-1.538.392zm-.126 3.403c-.272.44-.847.578-1.287.308-3.225-1.982-8.142-2.557-11.958-1.399-.494.15-1.017-.129-1.167-.623-.149-.495.13-1.016.624-1.167 4.358-1.322 9.776-.682 13.48 1.595.44.27.578.847.308 1.286zm-1.469 3.267c-.215.354-.676.465-1.028.249-2.818-1.722-6.365-2.111-10.542-1.157-.402.092-.803-.16-.895-.562-.092-.403.159-.804.562-.896 4.571-1.045 8.492-.595 11.655 1.338.353.215.464.676.248 1.028zm-5.503-17.308c-6.627 0-12 5.373-12 12 0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"}))},z=function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{fill:"#D41E08",d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3.664 15.889c-2.773 0-3.736-1.25-4.248-2.806l-.515-1.604c-.385-1.17-.834-2.084-2.244-2.084-.979 0-1.974.706-1.974 2.678 0 1.539.786 2.502 1.894 2.502 1.249 0 2.083-.931 2.083-.931l.515 1.396s-.866.85-2.679.85c-2.245-.001-3.496-1.316-3.496-3.754 0-2.534 1.251-4.025 3.607-4.025 2.133 0 3.208.77 3.881 2.854l.53 1.604c.385 1.171 1.058 2.021 2.678 2.021 1.091 0 1.668-.24 1.668-.834 0-.465-.273-.802-1.09-.994l-1.091-.256c-1.331-.321-1.861-1.01-1.861-2.101 0-1.748 1.412-2.293 2.854-2.293 1.638 0 2.63.593 2.759 2.037l-1.604.192c-.063-.69-.48-.979-1.251-.979-.706 0-1.138.321-1.138.866 0 .481.208.77.914.93l1.025.225c1.381.321 2.119.994 2.119 2.293 0 1.603-1.347 2.213-3.336 2.213z"}))},P=function(e){switch(e){case"spotify":return"Listen on Spotify";case"lastfm":return"LastFm";default:return null}},I=function(){var e=Object(a.useContext)(D).albumData;return e?r.a.createElement("main",{className:"album-info"},r.a.createElement("div",{className:"album-info--cover"},r.a.createElement("img",{alt:"album cover",src:e.image})),r.a.createElement("div",{className:"album-info--meta"},r.a.createElement("h1",{className:"heading"},e.name),r.a.createElement("p",{className:"subheading"},e.artist," ",r.a.createElement("span",null,e.year)),e.urls.map(function(e){var t=e.type,n=e.url;return r.a.createElement($,{key:t,type:t,url:n})}))):null},M=(n(20),function(e){var t=e.percent;return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress--bar",style:{width:"".concat(100*t,"%")}}))}),S=function(){var e=Object(a.useContext)(D).loadingProgress;return 1===e?null:r.a.createElement("div",{className:"loading-cover"},r.a.createElement(M,{percent:e}))};n(21);var U=function(){return r.a.createElement(N,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement(L,null),r.a.createElement(O,null),r.a.createElement(I,null),r.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.c2a05f6a.chunk.js.map